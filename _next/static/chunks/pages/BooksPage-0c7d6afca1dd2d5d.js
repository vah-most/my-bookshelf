(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[679],{42849:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/BooksPage",function(){return t(13817)}])},23619:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return F}});var a=t(85893),s=t(67294),n=t(9473);t(71730);var i=t(18993),l=t(50921),r=t(73935);t(85845);var c=e=>{let{portalId:o,children:t,onClose:n,className:i,title:c="",visible:d=!1,hideTitle:m=!1}=e,_=e=>{"Escape"===e.key&&n()};(0,s.useEffect)(()=>(document.addEventListener("keydown",_,!1),()=>{document.removeEventListener("keydown",_,!1)}),[]);let u=(0,a.jsx)("div",{className:"modal__container ".concat(d?"modal__container--visible":""),onClick:n,children:(0,a.jsxs)("div",{className:"modal__box ".concat(i),onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[!m&&(0,a.jsxs)("div",{className:"modal__title",children:[(0,a.jsx)("div",{children:c}),(0,a.jsx)("div",{className:"modal__close-btn",onClick:n,children:(0,a.jsx)(l.Z,{})})]}),(0,a.jsx)("div",{className:"modal__content",children:t})]})});return o&&document.getElementById(o)?r.createPortal(u,document.getElementById(o)):u};t(55872);var d=e=>{let{className:o,title:t,message:s,onOk:n,onCancel:l}=e;return(0,a.jsx)(c,{className:"prompt-modal ".concat(o),onClose:()=>l(),title:t||"Warning",visible:!0,portalId:"portal-prompt-id",children:(0,a.jsxs)("div",{className:"prompt-modal__box",children:[(0,a.jsx)("div",{className:"prompt-modal__message",children:s}),(0,a.jsxs)("div",{className:"prompt-modal__btns",children:[(0,a.jsx)(i.Z,{"data-testid":"prompt-modal__ok-btn",variant:"contained",className:"prompt-modal__ok-btn",onClick:n,children:"OK"}),l&&(0,a.jsx)(i.Z,{"data-testid":"prompt-modal__cancel-btn",variant:"contained",className:"prompt-modal__cancel-btn",onClick:l,children:"Cancel"})]})]})})},m=t(42142),_=e=>{let{book:o,className:t="",onDelete:n,onSelect:i}=e,[l,r]=(0,s.useState)(!1);return(0,a.jsxs)("div",{"data-testid":"book-item__container",className:"book-item__container ".concat(t),onClick:()=>{i&&i(o.id)},children:[(0,a.jsxs)("div",{className:"book-item__title",children:[(0,a.jsx)("div",{className:"book-item__name",children:o.name}),(0,a.jsx)("div",{className:"book-item__category",children:o.category})]}),(0,a.jsxs)("div",{className:"book-item__price",children:[o.price,"$"]}),(0,a.jsx)("div",{className:"book-item__desc",children:o.description}),(0,a.jsx)("div",{"data-testid":"book-item__delete",className:"book-item__delete",onClick:e=>{e.preventDefault(),e.stopPropagation(),r(!0)},children:(0,a.jsx)(m.Z,{className:"book-item__delete-icon"})}),l&&(0,a.jsx)(d,{message:"Are you sure?",onCancel:()=>r(!1),onOk:()=>{r(!1),n&&n(o.id)}})]})},u=t(66741),k=t(25309),b=t.n(k),v=t(30381),x=t.n(v);let p=()=>{let e="".concat(x()().unix()).concat(Math.floor(1e6*Math.random()));return e},h=(0,u.oM)({name:"books",initialState:{books:[]},reducers:{addBook:(e,o)=>{let t=b()(e.books),a=p(),s=b()(o.payload),n={...s,id:a};t.push(n),e.books=t},modifyBook:(e,o)=>{let t=b()(o.payload),a=t.id,s=e.books.findIndex(e=>e.id===a);if(s>=0){let o=b()(e.books);o[s]=t,e.books=o}},deleteBook:(e,o)=>{let t=o.payload,a=e.books,s=a.filter(e=>e.id!==t);e.books=s}}}),{addBook:j,modifyBook:N,deleteBook:f}=h.actions;var g=h.reducer,C=t(50361),w=t.n(C),y=t(38358),E=t(94810),B=t(82244);t(56808);var P=e=>{let{className:o,size:t="small",...s}=e;return(0,a.jsx)(E.Z,{injectFirst:!0,children:(0,a.jsx)(B.Z,{className:"textFieldView ".concat(o),size:t,...s})})};t(41750);var S=e=>{let{children:o,className:t,onClick:s,...n}=e;return(0,a.jsx)(i.Z,{onClick:s,className:"button__container ".concat(t),...n,children:o})};t(18526);var Z=e=>{let{book:o,onClose:t,onSave:n}=e,[i,l]=(0,s.useState)(o),[r,d]=(0,s.useState)(!0),m=(e,o)=>{let t=w()(i);t[e]=o,l(t)},_=()=>{if(!i.name)return!1;n(i)};return(0,a.jsx)(c,{visible:!0,onClose:t,title:i.id?"Edit Book Details":"Add Book Details",className:"book-list__editor-modal",portalId:"portal-modal-id",children:(0,a.jsxs)("div",{className:"book-editor__container",children:[(0,a.jsxs)("div",{className:"book-editor__rows",children:[(0,a.jsx)("div",{className:"book-editor__row",children:(0,a.jsx)(P,{autoFocus:!0,error:!r&&""===i.name,helperText:r||i.name?"":"Please enter name.",className:"book-editor__row-name",label:"Name",onBlur:()=>d(!1),onChange:e=>{m("name",e.target.value)},value:i.name})}),(0,a.jsxs)("div",{className:"book-editor__row",children:[(0,a.jsx)(P,{className:"book-editor__row-category",label:"Category",onChange:e=>{m("category",e.target.value)},value:i.category}),(0,a.jsx)(P,{className:"book-editor__row-price",label:"Price",type:"number",onChange:e=>{let o=Number(e.target.value);m("price",o)},value:i.price}),(0,a.jsx)(y.Z,{className:"book-editor__currency-icon"})]}),(0,a.jsx)("div",{className:"book-editor__row",children:(0,a.jsx)(P,{className:"book-editor__row-desc",label:"Description",multiline:!0,minRows:3,maxRows:3,onChange:e=>{m("description",e.target.value)},value:i.description})})]}),(0,a.jsx)("div",{className:"book-editor__row book-editor__submit-row",children:(0,a.jsx)(S,{className:"book-editor__save-btn",onClick:()=>_(),variant:"contained",children:"Save"})})]})})};t(82124);var D=()=>{let{books:e}=(0,n.v9)(e=>e.books),o=(0,n.I0)(),[t,i]=(0,s.useState)(null),l=o=>{let t=e.find(e=>e.id===o);t&&i(t)},r=e=>{o(f(e))};return(0,a.jsxs)("div",{className:"book-list__container",children:[e.length>0?(0,a.jsx)("div",{className:"book-list__items",children:e.map(e=>(0,a.jsx)(_,{book:e,onSelect:l,onDelete:r},e.id))}):(0,a.jsx)("div",{"data-testid":"book-list__empty",className:"book-list__empty",children:"No books added yet."}),t&&(0,a.jsx)(Z,{book:t,onClose:()=>i(null),onSave:e=>{i(null),o(e.id?N(e):j(e))}})]})};let I=(0,u.xC)({reducer:{books:g}});var O=e=>{let{children:o}=e;return(0,a.jsx)(n.zt,{store:I,children:o})};t(22176);var F=()=>(0,a.jsx)("div",{className:"books-page__container",children:(0,a.jsx)(O,{children:(0,a.jsx)(D,{})})})},13817:function(e,o,t){"use strict";t.r(o);var a=t(23619);o.default=a.default},18526:function(){},71730:function(){},82124:function(){},41750:function(){},85845:function(){},55872:function(){},56808:function(){},22176:function(){}},function(e){e.O(0,[774,885,656,888,179],function(){return e(e.s=42849)}),_N_E=e.O()}]);